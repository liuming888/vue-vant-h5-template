(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77e39ac5"],{"23b7":function(e,t,n){e.exports=n.p+"img/facbook.b93c5628.png"},"46f6":function(e,t,n){},"59d0":function(e,t,n){"use strict";n("b5aa");var o=n("2c46"),a=n("f121");t["a"]={beforeCreate:function(){window.FB||(n("e47c"),window.fbAsyncInit=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:FB.init(a["a"]),FB.AppEvents.logPageView(),console.warn("已经初始化FB了");case 3:case"end":return e.stop()}},e)})))}}},"6eff":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAMAAABG8BK2AAAAeFBMVEUAAADMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMyRUjlNAAAAJ3RSTlMABMjD3utkrV2nPvLYzLEN+BQJk+Umj0oyHrl3bFXTjkQYhzZNnIUvJLS2AAACWElEQVRYw5yU3XqiQBBEq0cGBggoiAT/Eo3Z1Pu/4c4QNisBRuFc6OeFx65qWkwjN7ONVKDTVAcq2pqbYDbXMK74iyoO95jDa5yyI62CoPr5tIlf8SxGfX9F1adkV5QiZbFLTnW2oUOZ5ybJWkdkBgH2JmpN2eOJrjEtwXGihP0xoCW+wstZO8lJMImcnEif4eGdlq8SXsovWmpMIblrsMFDGreDg2CUddb7ES81ybf1qOWFZIgnCUm+jHjkjeQFT3Nx8wxzHUgmmEHi+hkLe8EsLsMqPz29ePv57NW7IbeYzdYezX3Nka0dC7DLjfpt7bCAXW8vAfmBRXzcxTiTGgvR5Pl/whALCX/GSbphFo+T/FvTEYs5dstakyywmKJ7dgyZY8ht9UfQQ+JDgyE5ab4zmfEnS0nPouxJY4hpU4kezxTTefoWxuOptKAhM4xQrlpPz6JKjJCRDcKpoxR17+mkEwcaonYv057VQ4sb5B359J+erJznkQWJW7XyHXfr6d7Ec+YKAdMCXk+et7JJipQBNKsSfo/fgrKihlUJPES05PAgNtDfVswdB0AQCKKxtFgxkmhig5IY7n9D2WqtNiCPmvBndt5Aw0CbIo54rUcsyIUDz++qC4Y+A/Q1IaEYl61bZYsRUUfSz7lL0sMKFBik3EHFl7EC48ZkMmOiywFsEmDaAAs5bmgffTOcvbaW/pn9xKOHgdDRgeoGQjSWGSTGZugoEhxklRZk1QmXyQfoHPxBtqy9EoPzULjARx1+8FIkfoOXKMWCFzIG4kMpPyLbLSLb3YjsBTJAaAzXaiJUAAAAAElFTkSuQmCC"},"956d":function(e,t,n){"use strict";var o=n("46f6"),a=n.n(o);a.a},c244:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"dialogLoginSelect-container"},[o("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:n("d5d3"),expression:"require('@/assets/images/login-dialog.png')",arg:"background-image"}],staticClass:"dialog-content"},[o("div",{staticClass:"tips"},[e._v("\n      Tips: If you help your friend cut down the price, you will get cash rewards.\n    ")]),o("div",{staticClass:"login-types"},[o("div",{staticClass:"login-item",on:{click:e.loginFB}},[o("img",{attrs:{src:n("23b7")}}),o("p",[e._v("Facebook login")])])]),o("img",{staticClass:"close-img",attrs:{src:n("6eff")},on:{click:e.close}})])])},a=[],i=n("f46d"),r=n.n(i),s=(n("3a23"),n("b5aa"),n("2c46")),c=n("7f43"),u=n.n(c),l=n("3007"),f=n("59d0"),z={name:"dialogLoginSelect",mixins:[f["a"]],data:function(){return{}},methods:{close:function(){this.$store.commit("setLoginSelectShow",!1)},loginFB:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n,o,a,i,s,c,f,z,M,d,g;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.$faceBookApi.loginFB();case 2:if(t=e.sent,console.warn("loginInfo: ",t),!t){e.next=25;break}return n=t.authResponse.accessToken,o=t.id,a=t.name,i=t.pic_square,s={tp_id:o,tp_token:n,tp_type:1,tp_username:a,tp_avatar:i},c=this.$route.query,f=c.spuId,z=c.bargainId,M=c.inviteUserId,f&&(s.spu_id=f),z&&(s.bargain_id=z),M&&(s.invite_user_id=M),e.next=13,Object(l["g"])(s);case 13:if(d=e.sent,console.log("result: ",d),!d||!d.data){e.next=25;break}return g=d.data,this.$store.commit("setUserInfo",g),localStorage.setItem("userInfo",r()(g)),u.a.defaults.headers.common["User-Id"]=g.user_id,u.a.defaults.headers.common["Access-Token"]=g.access_token,this.$store.commit("setLoginSelectShow",!1),1==g.is_new&&window.localStorage.setItem("newUserInfo",r()(g)),this.$store.state.dialogs.loginSelect.jumpUrl?window.location.href=this.$store.state.dialogs.loginSelect.jumpUrl:window.location.reload(),e.abrupt("return",!0);case 25:return e.abrupt("return",!1);case 26:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},M=z,d=(n("956d"),n("17cc")),g=Object(d["a"])(M,o,a,!1,null,"56218c64",null);t["default"]=g.exports},d5d3:function(e,t,n){e.exports=n.p+"img/login-dialog.54a8ab3d.png"},e47c:function(e,t,n){"use strict";n.r(t);var o=n("a98d"),a=n("2e73"),i=n.n(a);(function(){function e(){try{console.warn("hello faceBookSdk!"),function(e,t,n){var o,a=e.getElementsByTagName(t)[0];e.getElementById(n)||(o=e.createElement(t),o.id=n,o.src="https://connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(o,a))}(document,"script","facebook-jssdk")}catch(e){console.error("出错了",e)}}e.prototype.loginFB=function(){return new i.a(function(e){FB.login(function(t){"connected"===t.status?(console.warn("login_success!!!!!",t),FB.api("/me",function(n){var a=Object(o["a"])({},t,n);FB.api("/"+n.id+"/picture","GET",{redirect:"false"},function(t){var n=t.data.url;a=Object(o["a"])({},a,{pic_square:n}),e(a)})})):(console.error("login_error!"),e(!1))})})},e.prototype.checkFBLoginState=function(){var e=this;return new i.a(function(t,n){FB.getLoginStatus(function(o){e.statusChangeCallback(o).then(function(e){t(e)}).catch(function(e){n(!1)})})})},e.prototype.statusChangeCallback=function(e){var t=this;return"connected"===e.status?t.getUserInfo(e):(console.error("没登录！"),i.a.resolve(!1))},e.prototype.getUserInfo=function(e){return new i.a(function(t){FB.api("/me",function(n){var a=Object(o["a"])({},e,n);FB.api("/"+n.id+"/picture","GET",{redirect:"false"},function(e){var n=e.data.url;a=Object(o["a"])({},a,{pic_square:n}),t(a)})})})},e.prototype.logoutFB=function(){FB.logout(function(e){})},e.prototype.shareFB=function(e){return new i.a(function(t){FB.ui({method:"share",href:e},function(e){e&&!e.error_message?t(e):(t(!1),console.error("Error while posting."))})})},window.$faceBookApi=new e})()}}]);